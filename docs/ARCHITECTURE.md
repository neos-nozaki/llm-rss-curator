# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨è¨­è¨ˆå“²å­¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€LLM RSS Curatorã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã¨ã€ãã®èƒŒå¾Œã«ã‚ã‚‹è¨­è¨ˆå“²å­¦ã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚¹ã‚¿ã‚¤ãƒ«: POPå‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ–¹å¼ï¼‰

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ **POPãƒ¡ãƒ¼ãƒ«çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š

- ğŸ“¥ **è¨˜äº‹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰** ã—ã¦ä¿å­˜ï¼ˆ`shared/storage`ï¼‰
- ğŸ’¾ **æ—¢èª­/æœªèª­ãªã©ã®çŠ¶æ…‹ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ç®¡ç†**ï¼ˆ`article_states.json`ï¼‰
- ğŸ”Œ **ã‚µãƒ¼ãƒãƒ¼ã¨ã¯åŒæœŸã—ãªã„** - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ä½œ
- ğŸ—‚ï¸ **å‰Šé™¤ã—ã¦ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ®‹ã‚‹** - å‰Šé™¤ãƒ•ãƒ©ã‚°ã®ã¿ç®¡ç†

**ãƒ¡ãƒªãƒƒãƒˆ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é–²è¦§å¯ã€é«˜é€Ÿã€å…ƒè¨˜äº‹æ¶ˆå¤±ã®å½±éŸ¿ãªã—ã€LLMå‡¦ç†æ¸ˆã¿å†…å®¹ã‚’æ°¸ç¶šä¿å­˜  
**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹é–“ã®åŒæœŸä¸å¯ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ¶ˆè²»

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

```
llm-rss-curator/
â”œâ”€â”€ rss-feeder/              # RSSãƒ•ã‚£ãƒ¼ãƒ‰å–å¾—
â”œâ”€â”€ llm-judge/               # LLMäº‹å‰ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
â”œâ”€â”€ web-scraper/             # Webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆMarkdownå‡ºåŠ›ï¼‰
â”œâ”€â”€ llm-processor/           # è¨˜äº‹å‡¦ç†ï¼ˆè¦ç´„ãƒ»è§£èª¬ç”Ÿæˆ)
â”œâ”€â”€ article-viewer/          # è¨˜äº‹é–²è¦§ãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ data-cleanup/            # ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â””â”€â”€ shared/
    â””â”€â”€ storage/             # ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RSS Feeder  â”‚ â†’ RSSã‹ã‚‰ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ storage/rss-feeds/{feed}/{id}.json
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM Judge   â”‚ â†’ LLMã§ä¾¡å€¤åˆ¤å®š + ã‚¿ã‚¤ãƒ—åˆ†é¡
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ filter_score, article_type ã‚’è¿½åŠ 
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Web Scraper â”‚ â†’ score >= threshold ã®è¨˜äº‹ã®ã¿å‡¦ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ storage/scraped-articles/{feed}/{id}.md
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Article Processorâ”‚ â†’ article_type ã«å¿œã˜ã¦å‡¦ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ storage/processed-articles/{feed}/{id}.md
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Article Viewer   â”‚ â†’ æ—¢èª­ç®¡ç†ãƒ»é–²è¦§
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ è¨­è¨ˆå“²å­¦

### 1. å®Œå…¨ãªç–çµåˆï¼ˆLoose Couplingï¼‰

**åŸå‰‡**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç‹¬ç«‹ã—ã¦å‹•ä½œã—ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†…éƒ¨å®Ÿè£…ã‚’çŸ¥ã‚‰ãªã„

**å®Ÿç¾æ–¹æ³•**:
- å…±æœ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã‚’ä»‹ã—ãŸãƒ‡ãƒ¼ã‚¿äº¤æ›
- JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹æ¨™æº–åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- æ˜ç¢ºã«å®šç¾©ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ã®ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“
- ä¸€éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å…¥ã‚Œæ›¿ãˆå¯èƒ½
- ä¸¦åˆ—é–‹ç™ºãŒå¯èƒ½

### 2. å¤–éƒ¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é§†å‹•ï¼ˆConfiguration-Drivenï¼‰

**åŸå‰‡**: ã™ã¹ã¦ã®æŒ¯ã‚‹èˆã„ã‚’å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã§åˆ¶å¾¡ã€ã‚³ãƒ¼ãƒ‰å¤‰æ›´ä¸è¦

**3å±¤ã®è¨­å®šåˆ†é›¢**:

```
ç’°å¢ƒä¾å­˜ (.env)
  â”œâ”€ APIã‚­ãƒ¼ï¼ˆç§˜å¯†æƒ…å ±ï¼‰
  â”œâ”€ ãƒ¢ãƒ‡ãƒ«é¸æŠï¼ˆç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹ï¼‰
  â””â”€ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒä¾å­˜ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾å­˜ (config/*.json)
  â”œâ”€ èˆˆå‘³ãƒˆãƒ”ãƒƒã‚¯
  â”œâ”€ ã‚¹ã‚³ã‚¢é–¾å€¤
  â””â”€ RSSãƒ•ã‚£ãƒ¼ãƒ‰ä¸€è¦§

ãƒ‡ãƒ¼ã‚¿æ§‹é€  (prompts/*.json, *.txt)
  â”œâ”€ LLMå‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒ
  â”œâ”€ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
  â””â”€ è©•ä¾¡åŸºæº–
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å†ãƒ“ãƒ«ãƒ‰ä¸è¦ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½
- Git ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- A/Bãƒ†ã‚¹ãƒˆãŒå®¹æ˜“

### 3. Judge as LLMï¼ˆLLMã«ã‚ˆã‚‹äº‹å‰é¸åˆ¥ï¼‰

**åŸå‰‡**: LLMã‚’ã€Œå¯©æŸ»å“¡ã€ã¨ã—ã¦ä½¿ã„ã€ä¾¡å€¤ã‚ã‚‹è¨˜äº‹ã ã‘ã‚’å‡¦ç†

**äºŒæ®µéšãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**:

```
Stage 1: LLM Judge
  â”œâ”€ å…¥åŠ›: title + summaryï¼ˆè»½é‡ï¼‰
  â”œâ”€ å‡¦ç†: LLMã«ã‚ˆã‚‹ä¾¡å€¤åˆ¤å®š
  â”œâ”€ å‡ºåŠ›: score (1-10) + article_type
  â””â”€ ã‚³ã‚¹ãƒˆ: ä½ï¼ˆçŸ­ã„å…¥åŠ›ï¼‰

Stage 2: Article Processor
  â”œâ”€ å…¥åŠ›: æœ¬æ–‡å…¨ä½“ï¼ˆé‡ã„ï¼‰
  â”œâ”€ å‡¦ç†: score >= threshold ã®ã¿
  â”œâ”€ å‡ºåŠ›: è©³ç´°ãªè¦ç´„ãƒ»è§£èª¬
  â””â”€ ã‚³ã‚¹ãƒˆ: é«˜ï¼ˆé•·ã„å…¥åŠ›ï¼‰
```

**åŠ¹æœ**:
- APIã‚³ã‚¹ãƒˆ 50-70% å‰Šæ¸›
- å‡¦ç†æ™‚é–“ã®çŸ­ç¸®
- ãƒã‚¤ã‚ºã®é™¤å»

### 4. è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã®æœ€é©åŒ–ï¼ˆType-Specific Processingï¼‰

**åŸå‰‡**: è¨˜äº‹ã®æ€§è³ªã«å¿œã˜ã¦å‡¦ç†æ–¹æ³•ã‚’å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆ

**å®Ÿè£…**:

```python
# LLM Judge ãŒè¨˜äº‹ã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®š
article_type = "news" or "tutorial"

# Article Processor ãŒå‹•çš„ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé¸æŠ
prompt_file = f"user_{article_type}.txt"

# ã‚¿ã‚¤ãƒ—åˆ¥ã®æœ€é©åŒ–
if article_type == "news":
    max_tokens = 800    # ç°¡æ½”
elif article_type == "tutorial":
    max_tokens = 2000   # è©³ç´°
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ç´ æ—©ãè¦ç‚¹æŠŠæ¡
- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯æ·±ã„ç†è§£
- ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®æœ€é©åŒ–

### 5. Schema-Driven Designï¼ˆã‚¹ã‚­ãƒ¼ãƒé§†å‹•è¨­è¨ˆï¼‰

**åŸå‰‡**: LLMå‡ºåŠ›ã®ä»•æ§˜ã‚’JSONã‚¹ã‚­ãƒ¼ãƒã§å®šç¾©ã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ

**å®Ÿè£…ä¾‹**:

```json
// response_schema.json
{
  "properties": {
    "score": {
      "type": "integer",
      "minimum": 1,
      "maximum": 10,
      "description": "è¨˜äº‹ã®ä¾¡å€¤ã‚’1-10ã§è©•ä¾¡ã—ãŸã‚¹ã‚³ã‚¢",
      "example": 8
    }
  }
}
```

```python
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆæ™‚ã«ã‚¹ã‚­ãƒ¼ãƒã‚’å‚ç…§
for field, spec in schema["properties"].items():
    prompt += f"- {field}: {spec['description']}\n"
    prompt += f"  ä¾‹: {spec['example']}\n"
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- Single Source of Truth
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸€è²«æ€§
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ãŒå®¹æ˜“

## ğŸ“ è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³&ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³

å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ï¼š
1. **å…¥åŠ›**: å‰æ®µéšã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
2. **å‡¦ç†**: ç‹¬è‡ªã®ãƒ­ã‚¸ãƒƒã‚¯ã§å‡¦ç†
3. **å‡ºåŠ›**: æ¨™æº–åŒ–ã•ã‚ŒãŸå½¢å¼ã§ä¿å­˜
4. **ãƒ•ã‚£ãƒ«ã‚¿**: æ¬¡æ®µéšã«æ¸¡ã™ãƒ‡ãƒ¼ã‚¿ã‚’é¸åˆ¥

### ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã§ã¯ãªããƒãƒƒãƒå‡¦ç†

**ç†ç”±**:
- ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…
- ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“
- cronç­‰ã§ã®è‡ªå‹•åŒ–ãŒç°¡å˜

**å°†æ¥ã®æ‹¡å¼µ**:
- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã¸ã®ç§»è¡Œã‚‚å¯èƒ½
- Pub/Subãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†

## ğŸ”„ RSS Feederã®é‡è¤‡é˜²æ­¢ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

### è¨˜äº‹ã®ä¸€æ„æ€§ä¿è¨¼

RSS Feederã¯ã€åŒã˜è¨˜äº‹ã‚’é‡è¤‡ã—ã¦ä¿å­˜ã—ãªã„ã‚ˆã†ã«ã€ä»¥ä¸‹ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™:

**1. URLãƒ™ãƒ¼ã‚¹ã®ä¸€æ„IDç”Ÿæˆ**
```python
def generate_article_id(url: str) -> str:
    """URLã®MD5ãƒãƒƒã‚·ãƒ¥ã‹ã‚‰12æ–‡å­—ã®IDã‚’ç”Ÿæˆ"""
    return hashlib.md5(url.encode()).hexdigest()[:12]
```

- åŒã˜URLã¯å¸¸ã«åŒã˜IDã‚’ç”Ÿæˆ
- MD5ãƒãƒƒã‚·ãƒ¥ã®è¡çªç¢ºç‡ã¯å®Ÿè³ªã‚¼ãƒ­
- 12æ–‡å­—ã§ååˆ†ãªä¸€æ„æ€§ã‚’ç¢ºä¿

**2. æ—¢å­˜ãƒã‚§ãƒƒã‚¯ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **
```python
def article_exists(feed_name: str, article_id: str) -> bool:
    """ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã‚’ãƒã‚§ãƒƒã‚¯"""
    article_path = rss_feeds_dir / feed_name / f"{article_id}.json"
    return article_path.exists()
```

- ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèªã®ã¿ï¼ˆé«˜é€Ÿï¼‰
- æ¯å›ã®å®Ÿè¡Œã§æ—¢å­˜è¨˜äº‹ã¯ã‚¹ã‚­ãƒƒãƒ—

**3. LLM Judgeã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¿æŒ**

æ—¢å­˜è¨˜äº‹ãŒå†åº¦RSSãƒ•ã‚£ãƒ¼ãƒ‰ã«ç¾ã‚ŒãŸå ´åˆã§ã‚‚ã€LLM JudgeãŒè¿½åŠ ã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä¿æŒã—ã¾ã™:

```python
def save_article_metadata(article_data: dict) -> bool:
    if article_path.exists():
        # æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        existing_data = json.load(file)
        # æ–°è¦ãƒ‡ãƒ¼ã‚¿ã§ãƒãƒ¼ã‚¸ï¼ˆfilter_scoreç­‰ã¯ä¿æŒï¼‰
        existing_data.update(article_data)
        # ä¿å­˜
        json.dump(existing_data, file)
        return False  # æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«
    else:
        # æ–°è¦ä¿å­˜
        json.dump(article_data, file)
        return True  # æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«
```

**ä¿æŒã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:**
- `filter_score` - LLM Judge ã®è©•ä¾¡ã‚¹ã‚³ã‚¢
- `filter_reason` - è©•ä¾¡ç†ç”±
- `article_type` - è¨˜äº‹ã‚¿ã‚¤ãƒ—ï¼ˆnews/tutorialï¼‰
- `interest_match` - ãƒãƒƒãƒã—ãŸèˆˆå‘³ãƒˆãƒ”ãƒƒã‚¯

### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æˆ¦ç•¥ï¼ˆ2025å¹´11æœˆä¿®æ­£ï¼‰

**æ—§å®Ÿè£…ã®å•é¡Œç‚¹:**
```python
# âŒ ä»¶æ•°åˆ¶é™ã«ã‚ˆã‚‹å‰Šé™¤ï¼ˆå»ƒæ­¢ï¼‰
cleanup_old_articles(max_articles=10)
# â†’ RSSãƒ•ã‚£ãƒ¼ãƒ‰ã«å«ã¾ã‚Œã‚‹è¨˜äº‹ã‚’å‰Šé™¤ â†’ æ¬¡å›ã¾ãŸä¿å­˜ â†’ ç„¡é™ãƒ«ãƒ¼ãƒ—
```

**ç¾åœ¨ã®å®Ÿè£…:**
```python
# âœ… æ—¥æ•°ãƒ™ãƒ¼ã‚¹ã®å‰Šé™¤ã®ã¿
cleanup_old_articles_by_date(retention_days=7)
# â†’ 7æ—¥ä»¥ä¸Šå¤ã„è¨˜äº‹ã®ã¿å‰Šé™¤
# â†’ RSSãƒ•ã‚£ãƒ¼ãƒ‰ã‹ã‚‰ç¢ºå®Ÿã«æ¶ˆãˆãŸè¨˜äº‹ã ã‘ã‚’å‰Šé™¤
```

**å‰Šé™¤åŸºæº–:**
- `RETENTION_DAYS`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 7æ—¥ï¼‰ã‚ˆã‚Šå¤ã„è¨˜äº‹
- ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°æ—¥æ™‚ï¼ˆ`st_mtime`ï¼‰ã§åˆ¤å®š
- RSSãƒ•ã‚£ãƒ¼ãƒ‰ã«å«ã¾ã‚Œã‚‹è¨˜äº‹ã¯å‰Šé™¤ã•ã‚Œãªã„

**ãªãœä»¶æ•°åˆ¶é™ã‚’å»ƒæ­¢ã—ãŸã‹:**
1. RSSãƒ•ã‚£ãƒ¼ãƒ‰ã¯å¸¸ã«æœ€æ–°Nä»¶ã‚’è¿”ã™
2. ä»¶æ•°åˆ¶é™ã§å‰Šé™¤ â†’ æ¬¡å›ã¾ãŸãƒ•ã‚£ãƒ¼ãƒ‰ã«ç¾ã‚Œã‚‹
3. æ—¢å­˜ãƒã‚§ãƒƒã‚¯ãŒå¤±æ•— â†’ å†ä¿å­˜ â†’ filter_scoreæ¶ˆå¤±
4. ç„¡é™ãƒ«ãƒ¼ãƒ—ãŒç™ºç”Ÿ

**è§£æ±ºç­–:**
- æ—¥æ•°ãƒ™ãƒ¼ã‚¹ã®å‰Šé™¤ã®ã¿ä½¿ç”¨
- RSSãƒ•ã‚£ãƒ¼ãƒ‰ã‹ã‚‰è‡ªç„¶ã«æ¶ˆãˆãŸè¨˜äº‹ã ã‘ã‚’å‰Šé™¤
- filter_scoreãªã©ã®LLMå‡¦ç†çµæœã‚’ç¢ºå®Ÿã«ä¿æŒ

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰

```json
{
  "id": "abc123",
  "feed_name": "aws",
  "title": "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«",
  "url": "https://example.com/article",
  "published": "2025-11-13T10:00:00Z",
  "author": "è‘—è€…å",
  "summary": "è¦ç´„æ–‡",
  "fetched_at": "2025-11-13T10:01:00Z",
  
  // LLM Judge ãŒè¿½åŠ 
  "filter_score": 8,
  "filter_reason": "æŠ€è¡“çš„ã«è©³ç´°ã§å®Ÿè·µçš„",
  "article_type": "tutorial",
  "interest_match": ["AI/LLM", "å®Ÿè£…"],
  
  // Article Processor ãŒè¿½åŠ ï¼ˆå°†æ¥ï¼‰
  "processed_at": "2025-11-13T10:05:00Z"
}
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
shared/storage/
â”œâ”€â”€ rss-feeds/              # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ aws/
â”‚   â”‚   â””â”€â”€ abc123.json
â”‚   â””â”€â”€ azure/
â”‚       â””â”€â”€ xyz789.json
â”œâ”€â”€ scraped-articles/       # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°æ¸ˆã¿æœ¬æ–‡
â”‚   â”œâ”€â”€ aws/
â”‚   â”‚   â””â”€â”€ abc123.md
â”‚   â””â”€â”€ azure/
â”‚       â””â”€â”€ xyz789.md
â”œâ”€â”€ processed-articles/     # è¦ç´„ãƒ»è§£èª¬
â”‚   â”œâ”€â”€ aws/
â”‚   â”‚   â””â”€â”€ abc123.md
â”‚   â””â”€â”€ azure/
â”‚       â””â”€â”€ xyz789.md
â””â”€â”€ article_states.json     # æ—¢èª­ãƒ»ãŠæ°—ã«å…¥ã‚Šç®¡ç†
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†

```bash
# .env ã§ç®¡ç†ï¼ˆGité™¤å¤–ï¼‰
OPENAI_API_KEY=sk-proj-...

# ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã«æ¸¡ã™
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã¯æ›¸ãè¾¼ã¾ãªã„
```

### ãƒ‡ãƒ¼ã‚¿ã®åˆ†é›¢

```
ç§˜å¯†æƒ…å ±     â†’ .envï¼ˆGité™¤å¤–ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š â†’ config/*.jsonï¼ˆGitç®¡ç†ï¼‰
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ â†’ prompts/*.txtï¼ˆGitç®¡ç†ï¼‰
ãƒ‡ãƒ¼ã‚¿       â†’ shared/storage/ï¼ˆGité™¤å¤–ï¼‰
```

## ğŸš€ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ç¾åœ¨ã®åˆ¶é™

- ã‚·ãƒ³ã‚°ãƒ«ãƒã‚·ãƒ³å®Ÿè¡Œ
- é€æ¬¡å‡¦ç†
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

### å°†æ¥ã®æ‹¡å¼µæ€§

**ä¸¦åˆ—å‡¦ç†**:
```python
# è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ä¸¦åˆ—å‡¦ç†
from concurrent.futures import ThreadPoolExecutor

with ThreadPoolExecutor(max_workers=4) as executor:
    executor.map(process_feed, feeds)
```

**åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**:
```python
# S3/GCS ã¸ã®ç§»è¡Œ
storage = S3Storage(bucket_name='rss-curator')
storage.save_metadata(article)
```

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼**:
```
RSS Feeder â†’ Queue â†’ LLM Judge â†’ Queue â†’ Web Scraper
```

## ğŸ§ª ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ã€å˜ä½“ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“:

```python
def test_filter_article():
    metadata = {"title": "Test", "summary": "Test summary"}
    filter_result = llm_judge.filter(metadata)
    assert filter_result["score"] >= 1
    assert filter_result["score"] <= 10
```

### çµ±åˆãƒ†ã‚¹ãƒˆ

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãªã®ã§ã€å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚Œã°çµ±åˆãƒ†ã‚¹ãƒˆã‚‚ç°¡å˜:

```bash
# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
cp test-data/rss-feeds/test.json shared/storage/rss-feeds/test/

# å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè¡Œ
docker-compose run --rm llm-judge
docker-compose run --rm web-scraper
docker-compose run --rm llm-processor

# çµæœã‚’æ¤œè¨¼
test -f shared/storage/processed-articles/test/test.md
```

## ğŸ“Š ç›£è¦–ã¨ãƒ­ã‚®ãƒ³ã‚°

### æ§‹é€ åŒ–ãƒ­ã‚°

```python
logger.info(
    "Article filtered",
    extra={
        "article_id": article_id,
        "score": filter_score,
        "article_type": article_type
    }
)
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆå°†æ¥å¯¾å¿œï¼‰

```python
# Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹
articles_processed.labels(feed='aws', type='tutorial').inc()
processing_time.labels(component='llm-judge').observe(duration)
```

## ğŸ”„ æ‹¡å¼µæ€§

### æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¿½åŠ 

1. **æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ**
2. **Dockerfile ã¨ requirements.txt ã‚’è¿½åŠ **
3. **main.py ã‚’å®Ÿè£…**
4. **docker-compose.yml ã«è¿½åŠ **

ä¾‹: è¨˜äº‹ã®ç¿»è¨³æ©Ÿèƒ½ã‚’è¿½åŠ 

```yaml
# docker-compose.yml
article-translator:
  build: ./article-translator
  volumes:
    - ./shared/storage:/app/storage
```

### æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è¿½åŠ 

RSSãƒ•ã‚£ãƒ¼ãƒ‰ä»¥å¤–ã®ã‚½ãƒ¼ã‚¹ï¼ˆä¾‹: Twitterã€Redditï¼‰:

1. **æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒ€ãƒ¼ã‚’å®Ÿè£…**
2. **åŒã˜ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å½¢å¼ã§å‡ºåŠ›**
3. **æ—¢å­˜ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒãã®ã¾ã¾å‹•ä½œ**

## ğŸ¨ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### è¨­è¨ˆåŸå‰‡

1. **Single Responsibility**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯1ã¤ã®è²¬å‹™
2. **Open/Closed**: æ‹¡å¼µã«é–‹æ”¾ã€å¤‰æ›´ã«é–‰é–
3. **Dependency Inversion**: æŠ½è±¡ã«ä¾å­˜ã€å…·è±¡ã«ä¾å­˜ã—ãªã„
4. **Separation of Concerns**: é–¢å¿ƒäº‹ã®åˆ†é›¢

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

```python
# ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¯ Path ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨
from pathlib import Path
metadata_file = Path(storage_path) / 'rss-feeds' / feed_name / f'{article_id}.json'

# ç’°å¢ƒå¤‰æ•°ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
model = os.getenv('FILTER_MODEL', 'gpt-4o-mini')

# ãƒ­ã‚°ã¯æ§‹é€ åŒ–
logger.info(f"Processing article: {article_id}", extra={'feed': feed_name})
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [Twelve-Factor App](https://12factor.net/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [Domain-Driven Design](https://martinfowler.com/bliki/DomainDrivenDesign.html)
